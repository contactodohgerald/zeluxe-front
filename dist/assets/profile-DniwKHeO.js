import{f as F,r as b,g as _,j as t,o as k,h as S}from"./index-BA5QVVV7.js";import{u as D,C as O}from"./confirm-booking-payment-DGALm_Zh.js";import{P as y,a as T,b as V}from"./dashboard_profile-YHaZBQkR.js";import"./get-countries-CXopN7Dk.js";import{u as q}from"./get-reviews-eDTf4wHf.js";import"./get-category--d4SC50h.js";import{u as z,c as A}from"./create-uploads-BBbM2Hw_.js";import{u as B}from"./get-listings-DDdOCoZO.js";import{C as G}from"./modal-B0eW36ol.js";import"./listings-card-BRIuzRzG.js";import"./password-reset-BYToCy1P.js";import"./not-found-Bmukj2Su.js";import"./get-states-DA9lHkGG.js";import"./get-listings-BUkg9-Sx.js";import"./get-reviews-BQq6GQ2c.js";const H=()=>{var x,f,u,h,g,j;const{addNotification:p}=F(),[E,o]=b.useState(null),e=_(),R=z(),i=B(),l=q(),n=D(),r=(x=i==null?void 0:i.data)==null?void 0:x.data,c=(f=l==null?void 0:l.data)==null?void 0:f.data,C=(u=n==null?void 0:n.data)==null?void 0:u.data,U=c==null?void 0:c.length,I=[{id:1,item_count:r==null?void 0:r.active.length,type:"Listing"},{id:2,item_count:30,type:"Sold"},{id:3,item_count:U,type:"Reviews"}];b.useEffect(()=>{var a;(a=e==null?void 0:e.data)!=null&&a.avatar&&o(e.data.avatar)},[e]);const L=a=>{var N;const m=(N=a.target.files)==null?void 0:N[0];if(!m)return;const P=URL.createObjectURL(m);o(P);const w=A.parse({document:[m]});R.mutate({data:w},{onSuccess(s){var v;p({type:"success",title:"success",message:"Image uploaded successfully"});const d=(v=s==null?void 0:s.data)==null?void 0:v.url;o(d)},onError(s){const d=S(s);p({type:"error",title:"Validation Error",message:d})}})};return t.jsx(t.Fragment,{children:t.jsxs("div",{className:"flex flex-col items-center",children:[t.jsxs("div",{className:"",children:[t.jsx("label",{htmlFor:"upload",className:"flex cursor-pointer flex-col items-center gap-2",children:t.jsxs("div",{className:"relative h-[9.7rem] w-[9.7rem] shrink-0 rounded-full object-cover",children:[t.jsx("img",{src:E||y,className:"h-[9.7rem] w-[9.7rem] rounded-full object-cover",alt:"Profile Image",onError:a=>k(a,y)}),t.jsx("div",{className:"absolute right-0 top-[6.8rem]",children:t.jsx(T,{})})]})}),t.jsx("input",{id:"upload",type:"file",className:"hidden",onChange:L})]}),t.jsxs("div",{className:"mt-[0.97rem] text-center",children:[t.jsxs("h4",{className:"font-lato text-[1.36rem] font-bold leading-[1.63rem] tracking-[0.03em] text-primary",children:[(h=e==null?void 0:e.data)==null?void 0:h.first_name," ",(g=e==null?void 0:e.data)==null?void 0:g.last_name]}),t.jsx("p",{className:"font-lato text-[0.97rem] font-semibold leading-[1.2rem] tracking-[0.03em] text-primary",children:(j=e==null?void 0:e.data)==null?void 0:j.email})]}),t.jsx("div",{className:"mt-3 flex gap-2",children:I.map(a=>t.jsxs(G,{className:"flex h-[5.94rem] w-[6.68rem] flex-col items-center justify-center rounded-[1.53rem] border-[1.36px] border-[#ECEDF3] md:w-[8.68rem]",children:[t.jsx("h6",{className:"text-center text-[1.2rem] font-bold leading-[1.43rem] tracking-[0.03em] text-primary",children:a.item_count}),t.jsx("p",{className:"text-center font-lato text-[0.85rem] font-medium leading-[1.02rem] tracking-[0.03em] text-primary",children:a.type})]},a.id))}),t.jsx("div",{className:"mt-4 text-center",children:t.jsx(V,{rentals:C,listings:r})})]})})},lt=()=>t.jsx(O,{title:"",children:t.jsx(H,{})});export{lt as ProfileRoute};
