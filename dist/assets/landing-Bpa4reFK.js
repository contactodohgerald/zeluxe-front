import{r as i,K as y,D as L,E as D,F as R,G as P,I as G,$ as U,J as Y,M as J,_ as O,i as W,j as e,p as z,S as K,L as H}from"./index-BQGAvRb0.js";import{u as V,H as q}from"./confirm-booking-payment-CJld9iR6.js";import{H as X,F as Z}from"./not-found-BC-blbTe.js";import{F as Q}from"./get-listings-BeTtOIxE.js";import{u as ee,i as te}from"./get-states-C-Ja6L8L.js";import{u as re,s as ne}from"./form-search-Ihe4m3To.js";import{F as se,I as $}from"./get-countries-XomYH-oX.js";import{B as oe,u as ae}from"./get-category-DMwHXmbr.js";import{R as le}from"./password-reset-CM26IJqX.js";import"./get-reviews-CP1KRBQV.js";let ie=i.createContext(void 0);function A(){return i.useContext(ie)}let E=i.createContext(null);E.displayName="DescriptionContext";function B(){let o=i.useContext(E);if(o===null){let n=new Error("You used a <Description /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(n,B),n}return o}function ce(){var o,n;return(n=(o=i.useContext(E))==null?void 0:o.value)!=null?n:void 0}let de="p";function me(o,n){let m=i.useId(),a=L(),{id:r=`headlessui-description-${m}`,...d}=o,s=B(),u=D(n);R(()=>s.register(r),[r,s.register]);let l=a||!1,x=i.useMemo(()=>({...s.slot,disabled:l}),[s.slot,l]),h={ref:u,...s.props,id:r};return P()({ourProps:h,theirProps:d,slot:x,defaultTag:de,name:s.name||"Description"})}let ue=y(me);Object.assign(ue,{});let I=i.createContext(null);I.displayName="LabelContext";function _(){let o=i.useContext(I);if(o===null){let n=new Error("You used a <Label /> component, but it is not inside a relevant parent.");throw Error.captureStackTrace&&Error.captureStackTrace(n,_),n}return o}function xe(o){var n,m,a;let r=(m=(n=i.useContext(I))==null?void 0:n.value)!=null?m:void 0;return((a=void 0)!=null?a:0)>0?[r,...o].filter(Boolean).join(" "):r}let pe="label";function he(o,n){var m;let a=i.useId(),r=_(),d=A(),s=L(),{id:u=`headlessui-label-${a}`,htmlFor:l=d??((m=r.props)==null?void 0:m.htmlFor),passive:x=!1,...h}=o,f=D(n);R(()=>r.register(u),[u,r.register]);let C=G(b=>{let v=b.currentTarget;if(v instanceof HTMLLabelElement&&b.preventDefault(),r.props&&"onClick"in r.props&&typeof r.props.onClick=="function"&&r.props.onClick(b),v instanceof HTMLLabelElement){let c=document.getElementById(v.htmlFor);if(c){let j=c.getAttribute("disabled");if(j==="true"||j==="")return;let F=c.getAttribute("aria-disabled");if(F==="true"||F==="")return;(c instanceof HTMLInputElement&&(c.type==="radio"||c.type==="checkbox")||c.role==="radio"||c.role==="checkbox"||c.role==="switch")&&c.click(),c.focus({preventScroll:!0})}}}),k=s||!1,S=i.useMemo(()=>({...r.slot,disabled:k}),[r.slot,k]),p={ref:f,...r.props,id:u,htmlFor:l,onClick:C};return x&&("onClick"in p&&(delete p.htmlFor,delete p.onClick),"onClick"in h&&delete h.onClick),P()({ourProps:p,theirProps:h,slot:S,defaultTag:l?pe:"div",name:r.name||"Label"})}let fe=y(he);Object.assign(fe,{});let be="select";function ge(o,n){let m=i.useId(),a=A(),r=L(),{id:d=a||`headlessui-select-${m}`,disabled:s=r||!1,invalid:u=!1,autoFocus:l=!1,...x}=o,h=xe(),f=ce(),{isFocusVisible:C,focusProps:k}=U({autoFocus:l}),{isHovered:S,hoverProps:p}=Y({isDisabled:s}),{pressed:b,pressProps:v}=J({disabled:s}),c=O({ref:n,id:d,"aria-labelledby":h,"aria-describedby":f,"aria-invalid":u?"":void 0,disabled:s||void 0,autoFocus:l},k,p,v),j=i.useMemo(()=>({disabled:s,invalid:u,hover:S,focus:C,active:b,autofocus:l}),[s,u,S,C,b,l]);return P()({ourProps:c,theirProps:x,slot:j,defaultTag:be,name:"Select"})}let M=y(ge);const ve=()=>{const o=W(),n=re(),m=a=>{const r=a.category.trim(),d={keyword:a.keyword.trim(),location:a.location.trim()},s=new URLSearchParams(d),u=`${z.search.getHref(r)}?${s.toString()}`;n.mutate({data:d},{onSuccess(l){o(u,{state:{listings:l==null?void 0:l.data}})}})};return e.jsx(e.Fragment,{children:e.jsx(se,{schema:ne,onSubmit:m,className:"grid grid-cols-1 items-center gap-4 sm:grid-cols-2 lg:grid-cols-4",children:({register:a,formState:r})=>e.jsxs(e.Fragment,{children:[e.jsx($,{placeholder:"What are you looking for",error:r.errors.keyword,registration:a("keyword"),className:"h-[calc(1.5rem + 0.75rem + 2px)] mt-8 block w-full rounded-[0.25rem] border border-[#ced4da] bg-white bg-clip-padding px-3 text-[1rem] font-[400] leading-[1.5] text-[#495057] outline-none focus:outline-none"}),e.jsx($,{placeholder:"Category",error:r.errors.category,registration:a("category"),className:"h-[calc(1.5rem + 0.75rem + 2px)] block w-full rounded-[0.25rem] border border-[#ced4da] bg-white bg-clip-padding px-3 text-[1rem] font-[400] leading-[1.5] text-[#495057] outline-none focus:outline-none"}),e.jsx($,{placeholder:"Location",error:r.errors.location,registration:a("location"),className:"h-[calc(1.5rem + 0.75rem + 2px)] block w-full rounded-[0.25rem] border border-[#ced4da] bg-white bg-clip-padding px-3 text-[1rem] font-[400] leading-[1.5] text-[#495057] outline-none focus:outline-none"}),e.jsx("div",{className:"col-md-6 items-center",children:e.jsx(oe,{isLoading:n.isPending,type:"submit",className:"btn active h-[calc(1.5rem + 0.75rem + 2px)] flex w-full rounded-[0.25rem] border-[#1c7430] bg-[#1e7e34] py-[0.375rem] text-[1rem] text-white hover:text-white",children:"Search Now"})})]})})})},Pe=()=>{var b,v,c,j,F;const[o,n]=i.useState(0),[m,a]=i.useState(null),[r,d]=i.useState(null),s=V({}),u=(b=s==null?void 0:s.data)==null?void 0:b.data,l=ee(),x=(v=l==null?void 0:l.data)==null?void 0:v.data,h=ae(),f=(c=h==null?void 0:h.data)==null?void 0:c.data;if(l.isLoading||s.isLoading)return e.jsx("div",{className:"flex h-48 w-full items-center justify-center",children:e.jsx(K,{size:"lg"})});const C=t=>{a(t.target.value),d(null)},k=t=>{d(t.target.value),a(null)},p=((t,N,T)=>{let g=t;return N&&(g=g==null?void 0:g.filter(w=>(w==null?void 0:w.address.state_id)===N)),T&&(g=g==null?void 0:g.filter(w=>(w==null?void 0:w.category_id)===T)),g})(u,m,r);return e.jsxs(e.Fragment,{children:[e.jsx(q,{description:"Welcome to DNest Listings Home Page"}),e.jsx(X,{}),e.jsxs("main",{children:[e.jsx("div",{className:"hero-area bg-1 overly text-center",children:e.jsx("div",{className:"container mx-auto",children:e.jsx("div",{className:"row",children:e.jsxs("div",{className:"col-md-12 relative",children:[e.jsxs("div",{className:"content-block mx-2 md:mx-0",children:[e.jsx("h1",{className:"text-[35px] font-bold",children:"Find Your Perfect Stay."}),e.jsxs("p",{className:"mx-3 mb-4 text-center text-[20px] md:mx-0",children:["Join the countless individuals who choose to stay and experience ",e.jsx("br",{}),"the convenience and comfort of our apartments worldwide."]}),e.jsx("div",{className:"short-popular-category-list text-center",children:e.jsxs("ul",{className:"inline-flex flex-wrap pl-3 sm:flex-nowrap sm:space-x-4 sm:pl-0",children:[(j=f==null?void 0:f.slice(0,3))==null?void 0:j.map((t,N)=>e.jsxs(H,{to:"#",onClick:()=>{d(t==null?void 0:t.id)},className:"mb-3 mr-2 flex items-center space-x-1 border border-[#404040] px-2.5 py-[4px] text-[12px] font-[200] text-[#c1c1c1] hover:underline sm:mr-0",children:[e.jsx(Q,{icon:te[t==null?void 0:t.name]}),e.jsx("span",{children:t==null?void 0:t.name})]},N)),e.jsxs(M,{onChange:k,className:"explore mb-3 mr-2 flex appearance-none items-center space-x-1 border border-[#404040] bg-transparent px-2.5 py-[4px] text-[12px] font-[200] text-[#c1c1c1] outline-none hover:underline focus:outline-none sm:mr-0",children:[e.jsx("option",{children:"More Category"}),(F=f==null?void 0:f.slice(3))==null?void 0:F.map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})]})})]}),e.jsx("div",{className:"advance-search mx-8 md:mx-0",children:e.jsx("div",{className:"container mx-auto",children:e.jsx(ve,{})})})]})})})}),e.jsxs("section",{className:"px-[10px] py-[100px] text-center",children:[e.jsx("h2",{className:"mb-4 text-[32px] text-black-6",children:"Featured Apartments"}),e.jsxs("div",{className:"container mx-auto",children:[e.jsxs("div",{className:"flex flex-wrap border-b pb-4",children:[x==null?void 0:x.slice(0,11).map((t,N)=>e.jsx(H,{to:"",className:`${o===N?"text-green-5 underline":"text-black-6"} p-4`,onClick:()=>{n(N),a(t==null?void 0:t.id),d(null)},children:t==null?void 0:t.name},t==null?void 0:t.id)),e.jsx("div",{className:"flex items-center text-gray-700",children:e.jsxs(M,{onChange:C,className:"explore max-w-[162px] cursor-pointer appearance-none rounded-[0.25rem] border-none bg-[#6c757d] px-[1.75rem] py-[0.375rem] text-white outline-none hover:border-[#545b62] hover:bg-[#5a6268] focus:outline-none",children:[e.jsx("option",{children:"Explore More"}),x==null?void 0:x.slice(11).map(t=>e.jsx("option",{value:t.id,children:t.name},t.id))]})})]}),p&&(p==null?void 0:p.length)>0?e.jsx(le,{rentals:p}):e.jsx("div",{children:"No rentals match the selected filters"})]})]})]}),e.jsx(Z,{})]})};export{Pe as LandingRoute};
